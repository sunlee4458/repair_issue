<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"> 
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no;">
	<title>BOX修护</title>

	<link rel="stylesheet" href="{{url_for('static',filename='css/bootstrap.min.css')}}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <link href="{{url_for('static',filename='css/fileinput.css')}}" media="all" rel="stylesheet" type="text/css"/>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
	<script src="{{url_for('static',filename='js/bootstrap_3.3.7_js_bootstrap.min.js')}}"></script>
	<script src="{{url_for('static',filename='js/plugins/buffer.min.js')}}" type="text/javascript"></script>
    <script src="{{url_for('static',filename='js/plugins/filetype.min.js')}}" type="text/javascript"></script>
    <script src="{{url_for('static',filename='js/plugins/piexif.js')}}" type="text/javascript"></script>
    <script src="{{url_for('static',filename='js/plugins/sortable.js')}}" type="text/javascript"></script>
    <script src="{{url_for('static',filename='js/fileinput.js')}}" type="text/javascript"></script>
    <script src="{{url_for('static',filename='js/locales/fr.js')}}" type="text/javascript"></script>
    <script src="{{url_for('static',filename='js/locales/es.js')}}" type="text/javascript"></script>
    <script src="{{url_for('static',filename='themes/gly/theme.js')}}" type="text/javascript"></script>
    <script src="{{url_for('static',filename='themes/fa5/theme.js')}}" type="text/javascript"></script>
    <script src="{{url_for('static',filename='themes/explorer-fa5/theme.js')}}" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
	<script>$.fn.fileinput.defaults.theme = 'gly';</script>

    {% if data %}
        {% if data.code == 0 %}
            <script>alert("提交成功");</script>
        {% else %}
            <script>alert("提交失败:{{ data.message }}");window.history.back(-1);</script>
        {% endif %} 
    {% endif %} 
</head>
<body>
<div class="container">
    <form enctype="multipart/form-data" method="post" action="{{url_for('module_page_group.repair_issue_upload')}}">
            <h3 class="text-center font-weight-bold">产线作业不良反馈</h3>
            <div class="input-group"  style="padding: 0px 0px 5px 0px;">
                <span class="input-group-addon">PF:</span>
                <input name="pf_code" type="text" class="form-control" placeholder="" value="PF4W4MLY" required>
            </div>
            <!--
            <div class="embed-responsive embed-responsive-16by9" style="height: 600px;">
                <iframe id ="mframe" class="embed-responsive-item" src="https://scanapp.org/"></iframe>
            </div>-->
            <div class="input-group" style="padding: 0px 0px 5px 0px;">
                <span class="input-group-addon">问题描述:</span>
                <select name="issue_name" class="selectpicker form-control" data-live-search="true" title="请选择一个" required>
                    <optgroup label="作业">
                        <option>UP走形</option>
                        <option>UP起子打坏</option>
                        <option>压条没有贴屏组</option>
                        <option>螺丝锁破阳</option>
                        <option>排线没插到位</option>
                    </optgroup>
                    <optgroup label="测试">
                        <option>未组到位</option>
                    </optgroup>
                    <optgroup label="MI">
                        <option>MI未定义</option>
                    </optgroup>
                </select>
            </div>
            <div class="input-group" style="padding: 0px 0px 5px 0px;">
                <span class="input-group-addon">维修员工号:</span>
                <input name="user_id" type="text" class="form-control" value="{{ data.data.user_id if data else 'H1201L7'}}" placeholder="" required>
            </div>
            <div class="form-group">
                <div class="file-loading">
                    <input id="file-1" name="issue_img" type="file" class="file" data-overwrite-initial="false" data-min-file-count="1" data-theme="fa5" multiple required> <!---multiple-->>
                </div>
            </div>
            <div style="text-align: center;">
                <button id="btn_submit" type="submit" class="btn btn-primary">&nbsp;提&nbsp;&nbsp;交&nbsp;</button>
            </div>
        </div>
    </form>
</div>

<script type="text/javascript">
	$("#file-1").fileinput({
        theme: 'fa5',
        uploadUrl: '#', 
        allowedFileExtensions: ['jpg', 'png', 'gif', 'jpeg', 'txt'],
        overwriteInitial: false,
        maxFileSize: 1000 * 10,
        maxFilesNum: 2,
        //allowedFileTypes: ['image', 'video', 'flash'],
        slugCallback: function (filename) {
            return filename.replace('(', '_').replace(']', '_');
        }
    });
</script>  

</body>
</html>